# 检核规则配置系统需求文档

## 概述
本模块负责检核规则的创建、配置、管理和测试，支持单句规则、双句规则、格式规则、高级规则四类配置页面，并提供规则列表的筛选、批量操作与状态管理能力；支持从dashboard-home工作台页面进入规则管理相关功能的导航。界面元素、字段名称、按钮文案与占位文本须与原型页面保持完全一致。

## 导航与入口（dashboard-home 工作台）
- 顶部菜单栏
  - “主页 / 产品管理 / 规则管理 / 设置”，系统标题显示“产品检核系统”
  - 点击“规则管理”进入“规则管理主界面”
- 快速开始 / 便捷导航（工作台入口）
  - 规则管理主界面（进入“全部规则”列表）
  - 单条规则创建（直达“添加规则单句”Tab）
  - 模板批量导入（直达导入流程/弹窗）
  - 检核跳转（直达“检核跳转（规则页跳转）”）

## 页面与功能

### 1. 规则管理主界面
- 顶部操作与工具
  - 返回、刷新
  - 导入、添加、全部规则
  - 删除、单条规则创建、关注、模板批量导入、提交OA审核
- 筛选区元素（逐字对齐）
  - 规则来源：
  - 适用险种：
  - 规则管理部门：
  - 审核状态：
  - 有效状态：
  - 适用章节：
  - 适用经营区域：
  - 输入查询：占位“请输入关键词”
  - 起始时间：时间选择（示例“09:12:21”）
  - 终止时间：时间选择（示例“09:12:21”）
  - 已选条件：标签与“清除全部”
- 列表表头（顺序与命名一致）
  - 选择框（）
  - 规则编号
  - 规则描述
  - 规则来源
  - 规则管理部门
  - 适用  险种
  - 适用要件
  - 适用章节
  - 审核状态
  - 有效状态
  - 最后更新时间
  - 操作（“编辑”“审核”）
- 列表项状态枚举（以原型示例为准）
  - 审核状态示例：待技术评估、待提交OA审核、已提交OA审核、OA审核通过
  - 有效状态示例：有效、无效、待开发上线
- 批量操作与分页
  - 全选（ 全选）、反选（ 反选）、批量操作
  - 分页：1…5、每页“10条/页”等（与原型控件一致）
- 空态与其他状态
  - 文件夹列表（空）
  - 搜索为空（“搜索结果”“返回”）
  - 全部文件视图（原型中“全部规则”标题与分页）

### 2. 添加规则单句
- 顶部Tab：单句规则 / 双句规则 / 高级规则 / 格式规则
- 字段与占位（必填以“*”标注，逐字一致）
  - 规则描述（*）：“请输入规则描述”，计数“已输入0/300”
  - 匹配章节（*）：“请选择匹配章节”
  - 匹配类型（*）：“请选择匹配类型”
  - 匹配内容（*）：“请填写匹配内容”
  - 触发条件（*）：“请选择触发条件”
  - 提示类型（*）：“请选择提示类型”
  - 提示内容（*）：多行文本域
  - 适用要件（*）
  - 适用险种：“请选择险种类型”
  - 适用经营区域：“请选择经营区域”
  - 具体地方区域：“请选择具体地方区域”
  - 产品性质：“请填写产品性质”
  - 规则管理部门：“请填写规则管理部门”
  - 规则来源：“请填写规则来源”
- 操作
  - 提交、重置、返回

### 3. 添加规则双句
- 顶部Tab：单句规则 / 双句规则 / 高级规则 / 格式规则
- 字段与占位（在单句基础上增加A/B成对字段）
  - 规则描述（*）：“请输入规则描述”“已输入0/300”
  - 匹配章节A（*）：“请选择匹配章节”
  - 匹配类型A（*）：“请选择匹配类型”
  - 匹配内容A（*）：“请填写匹配内容”
  - 匹配章节B（*）：“请选择匹配章节”
  - 匹配类型B（*）：“请选择匹配类型”
  - 匹配内容B（*）：“请填写匹配内容”
  - 触发条件（*）：“请选择触发条件”
  - 提示类型/提示内容（*）
  - 适用要件（*）、以及“适用险种/适用经营区域/具体地方区域/产品性质/规则管理部门/规则来源”
- 操作
  - 提交、重置、返回

### 4. 添加规则格式
- 顶部Tab：单句规则 / 双句规则 / 高级规则 / 格式规则
- 字段与占位（逐字一致）
  - 规则描述（*）：“请输入规则描述”“已输入0/300”
  - 匹配位置（*）：“请填写匹配位置（如段落，序号，标题）”
  - 匹配内容（*）：“具体文本匹配内容”
  - 段落格式要求（*）：“段落格式要求（支持识别缩进，居中，对齐等）”
  - 字体格式要求（*）：“字体格式要求（支持识别字号字体加粗等）”
  - 行文格式要求（*）：“行文格式要求，及其他要求”
  - 提示类型（*）：“请选择提示类型”
  - 提示内容（*）
  - 适用要件（*）、以及“适用险种/适用经营区域/具体地方区域/产品性质/规则管理部门/规则来源”
- 操作
  - 提交、重置、返回

### 5. 添加规则高级
- 顶部Tab：单句规则 / 双句规则 / 高级规则 / 格式规则
- 字段与占位（逐字一致）
  - 规则描述（*）：“请输入规则描述”“已输入0/300”
  - 提示类型（*）：“请选择提示类型”
  - 提示内容（*）
  - 适用要件（*）、以及“适用险种/适用经营区域/具体地方区域/产品性质/规则管理部门/规则来源”
- 操作
  - 提交、重置、返回
- 说明
  - 本页面不引入LLM生成入口（后续如需集成，依赖llm-service-management模块，另行补充原型与需求）

### 6. 添加成功
- 页面要素
  - “提交成功”
  - 操作按钮：返回列表、查看项目、打 印
  - 展示基础项信息与流程进度（以原型为准）

### 7. 检核跳转（规则页跳转）
- 标题与基本操作
  - 标题：“产品检核 - 选择待检核产品”
  - 关闭、确定、取消
- 筛选与输入
  - 产品类别：输入框（“输入产品类别”）
  - 开发类型：下拉“全部”
  - 报送类型：下拉“全部”
  - 检核状态：下拉“全部”
  - 输入查询：“请输入关键词”
  - 起始时间、终止时间：时间选择（示例“09:12:21”）
  - 标签示例：农业险、未检核、自主研发
- 结果与选择
  - “选中规则：”列表展示候选项（以原型示例为准）

## 用户故事与验收标准

### 单句匹配规则配置
- 用户故事：作为业务用户，我希望能够创建单句匹配规则，检查文档中特定关键词或句子的出现情况。
- 验收标准
  1. 创建单句规则时，支持配置“匹配章节/匹配类型/匹配内容/触发条件/提示类型/提示内容”，界面与原型字段完全一致。
  2. 必填项未填时给出校验提示；“规则描述”显示并动态更新“已输入0/300”字数。
  3. 提交成功进入“添加成功”页面，可“返回列表/查看项目/打 印”。

### 双句匹配规则配置
- 用户故事：作为业务用户，我希望能够创建双句匹配规则，检查文档中两个关键词或句子之间的逻辑关系。
- 验收标准
  1. 创建双句规则时，支持配置A/B两组“匹配章节/匹配类型/匹配内容”与“触发条件/提示类型/提示内容”。
  2. 必填项校验、字数计数与提交流程与单句规则一致。

### 格式类规则配置
- 用户故事：作为业务用户，我希望能够创建格式检查规则，验证文档的字体、字号、段落等格式是否符合要求。
- 验收标准
  1. 支持配置“匹配位置/匹配内容/段落格式要求/字体格式要求/行文格式要求/提示类型/提示内容”。
  2. 提交、重置与必填校验与其他表单一致。

### 规则列表管理
- 用户故事：作为业务用户，我希望能够查看、搜索和管理所有的检核规则，方便规则的维护和使用。
- 验收标准
  1. 进入规则管理主界面显示“全部规则”列表，表头与原型一致。
  2. 支持按筛选项查询：规则来源、适用险种、规则管理部门、审核状态、有 效状态、适用章节、适用经营区域、输入查询、起始时间、终止时间；“已选条件”显示标签并可“清除全部”。
  3. 支持全选、反选、批量操作与分页设置（10条/页等）。
  4. 操作列提供“编辑/审核”；顶部提供“导入/添加/删除/单条规则创建/关注/模板批量导入/提交OA审核”。

### 规则状态管理（审核状态与有效状态）
- 用户故事：作为业务用户，我希望能够管理规则的生命周期状态，确保只有有效的规则参与检核。
- 验收标准
  1. 审核状态：支持“待技术评估/待提交OA审核/已提交OA审核/OA审核通过”等（以原型示例为准）。
  2. 有效状态：支持“有效/无效/待开发上线”等（以原型示例为准）。
  3. 支持在列表与详情操作中变更状态；“提交OA审核”动作会将所选规则状态变更为“已提交OA审核”。

### 检核跳转流程
- 用户故事：作为业务用户，我希望在检核前选择产品并按条件筛选，以便快速定位目标。
- 验收标准
  1. “产品检核 - 选择待检核产品”页面提供：产品类别、开发类型、报送类型、检核状态、输入查询、起始/终止时间、关键词与标签的筛选与展示。
  2. 点击“确定”完成选择；“取消/关闭”退出。

## 非功能需求
- 性能要求
  - 规则创建和修改响应时间不超过3秒
  - 列表筛选结果返回不超过3秒
  - 支持同时管理的规则数量不少于1000条
- 可用性要求
  - 界面元素命名、文案与占位文本须与原型保持完全一致
  - 表单校验提示清晰，空态页面与反馈符合原型
  - 提供模板批量导入入口（与“模板批量导入”操作一致）
- 扩展性要求
  - 支持规则类型扩展与状态字典扩展
  - 支持规则的版本管理与回滚（后续阶段）

## 依赖与边界
- 依赖模块：user-auth-system（登录与权限）、dashboard-home（菜单/快捷入口）
- 可选依赖：llm-service-management（若未来在“高级规则”中引入LLM能力）
- 边界：本阶段不交付LLM自动生成规则的UI与独立的“规则测试”页面（原型未提供）

## 开放问题
1. 审核与有效状态的完整字典是否以原型示例为准，是否需要新增“草稿”仅用于数据层？
2. “模板批量导入”的模板字段与校验是否需要在本需求中固化（可参考现有前端模板示例）？
3. “检核跳转”后续落地页与返回路径是否固定，需要在需求中锁定具体路由吗？