# 产品文档管理系统实施计划

## 实施任务列表

- [ ] 1. 建立项目基础架构和核心接口
  - 创建Spring Boot项目结构，包含controller、service、repository、entity等包
  - 定义核心数据模型接口和枚举类型
  - 配置数据库连接和基础配置文件
  - _需求: 1.页面导航功能, 2.产品管理主界面_

- [ ] 2. 实现数据模型和数据库设计
  - [ ] 2.1 创建产品信息数据模型
    - 实现Product实体类，包含农险和备案产品的所有字段
    - 创建ProductRepository接口，定义基础CRUD操作
    - 编写产品信息相关的数据访问测试
    - _需求: 5.新增产品功能, 6.农险产品信息表单管理, 6.1备案产品信息表单管理_

  - [ ] 2.2 创建文档文件数据模型
    - 实现DocumentFile实体类，支持多种文档类型
    - 创建DocumentFileRepository接口，包含按产品ID查询等方法
    - 实现文档状态枚举和文档类型枚举
    - _需求: 8.要件文档路径配置与上传, 13.附件文档管理_

  - [ ] 2.3 创建校验结果数据模型
    - 实现ValidationResult实体类，记录校验结果
    - 创建ValidationResultRepository接口
    - 定义校验类型枚举和校验状态枚举
    - _需求: 9.文档校验与错误提示_

- [ ] 3. 实现产品管理主界面功能
  - [ ] 3.1 实现产品列表查询服务
    - 创建ProductService类，实现产品列表查询逻辑
    - 实现筛选查询功能，支持多条件组合查询
    - 实现分页查询功能
    - _需求: 2.产品管理主界面, 4.产品列表分页与筛选_

  - [ ] 3.2 实现产品管理控制器
    - 创建ProductController类，提供产品查询API
    - 实现GET /api/v1/products接口，支持筛选和分页参数
    - 添加产品列表响应数据格式化
    - _需求: 2.产品管理主界面, 4.产品列表分页与筛选_

  - [ ] 3.3 创建产品管理前端页面
    - 实现产品管理主界面组件，包含筛选查询模块
    - 创建产品列表表格组件，支持产品名称超链接
    - 实现分页组件和筛选条件组件
    - _需求: 2.产品管理主界面, 4.产品列表分页与筛选_

- [ ] 4. 实现新增产品功能
  - [ ] 4.1 创建产品表单组件
    - 实现农险产品信息表单组件，包含所有必填和可选字段
    - 实现备案产品信息表单组件，包含备案产品特有字段
    - 实现模板选择功能，支持两种模板切换
    - _需求: 5.新增产品功能, 6.农险产品信息表单管理, 6.1备案产品信息表单管理_

  - [ ] 4.2 实现产品创建服务
    - 创建ProductCreationService类，处理产品创建逻辑
    - 实现表单数据验证和必填项检查
    - 实现产品信息保存功能
    - _需求: 5.新增产品功能, 10.产品提交与成功反馈_

  - [ ] 4.3 实现产品创建API
    - 在ProductController中添加POST /api/v1/products接口
    - 实现请求参数验证和错误处理
    - 返回创建成功的产品ID
    - _需求: 5.新增产品功能, 10.产品提交与成功反馈_

- [ ] 5. 实现文档上传和处理功能
  - [ ] 5.1 实现文件上传服务
    - 创建FileUploadService类，处理文件上传逻辑
    - 实现文件类型验证和大小限制
    - 实现文件存储和路径管理
    - _需求: 8.要件文档路径配置与上传_

  - [ ] 5.2 实现产品信息登记表解析
    - 创建DocumentParserService类，解析Excel格式登记表
    - 实现产品信息自动提取功能
    - 实现同目录要件文档路径自动识别
    - _需求: 7.产品信息登记表上传与解析_

  - [ ] 5.3 实现文档上传API
    - 创建DocumentController类，提供文档上传接口
    - 实现POST /api/v1/products/{productId}/registration接口
    - 实现POST /api/v1/products/{productId}/documents接口
    - _需求: 7.产品信息登记表上传与解析, 8.要件文档路径配置与上传_

- [ ] 6. 实现文档校验功能
  - [ ] 6.1 创建文档校验引擎
    - 实现DocumentValidationService类，包含三种校验类型
    - 实现要件完整性校验逻辑
    - 实现名称一致性校验和标题一致性校验
    - _需求: 9.文档校验与错误提示_

  - [ ] 6.2 集成校验功能到上传流程
    - 在文档上传后自动触发校验
    - 实现校验结果存储和错误信息生成
    - 在前端显示校验错误提示
    - _需求: 9.文档校验与错误提示_

- [ ] 7. 实现产品提交和成功页面
  - [ ] 7.1 实现产品提交逻辑
    - 在ProductService中实现完整的提交验证
    - 检查必填项和文档校验状态
    - 更新产品状态为已提交
    - _需求: 10.产品提交与成功反馈_

  - [ ] 7.2 创建提交成功页面
    - 实现添加成功页面组件，显示成功图标和项目信息
    - 实现项目详情展示，包含项目ID、负责人、生效时间
    - 添加返回列表、查看项目、打印按钮功能
    - _需求: 10.产品提交与成功反馈_

- [ ] 8. 实现表单重置和数据清理
  - [ ] 8.1 实现前端表单重置功能
    - 在产品表单组件中添加重置按钮处理
    - 清空所有表单字段和文件路径
    - 清除校验错误提示信息
    - _需求: 11.表单重置与数据清理_

  - [ ] 8.2 添加重置确认对话框
    - 实现重置操作确认提示
    - 防止用户误操作导致数据丢失
    - _需求: 11.表单重置与数据清理_

- [ ] 9. 实现要件详情页面
  - [ ] 9.1 创建产品详情服务
    - 实现ProductDetailService类，获取产品完整信息
    - 实现附件列表查询功能
    - 包含产品基本信息和文档列表
    - _需求: 12.要件详情页面_

  - [ ] 9.2 实现产品详情API
    - 在ProductController中添加GET /api/v1/products/{productId}接口
    - 返回产品信息和附件列表数据
    - _需求: 12.要件详情页面_

  - [ ] 9.3 创建要件详情前端页面
    - 实现产品详情页面组件，显示产品基本信息
    - 实现附件列表表格，支持产品名称超链接预览
    - 添加编辑和删除按钮
    - _需求: 12.要件详情页面_

- [ ] 10. 实现附件文档管理功能
  - [ ] 10.1 实现文档预览服务
    - 创建DocumentPreviewService类，支持在线预览
    - 实现原文档和检核后文档预览
    - 支持多种文档格式的预览
    - _需求: 13.附件文档管理_

  - [ ] 10.2 实现文档下载服务
    - 创建DocumentDownloadService类，处理文档下载
    - 支持原文档和检核后文档下载
    - 实现文件流响应处理
    - _需求: 13.附件文档管理_

  - [ ] 10.3 实现文档管理API
    - 在DocumentController中添加预览和下载接口
    - 实现GET /api/v1/documents/{documentId}/preview接口
    - 实现GET /api/v1/documents/{documentId}/download接口
    - _需求: 13.附件文档管理_

  - [ ] 10.4 实现文档重新上传功能
    - 在DocumentController中添加文档更新接口
    - 支持单个要件的重新上传和替换
    - 更新文档版本和校验状态
    - _需求: 13.附件文档管理_

- [ ] 11. 实现批量文档操作功能
  - [ ] 11.1 实现批量下载服务
    - 创建BatchOperationService类，处理批量操作
    - 实现多文档打包下载功能
    - 支持原文档和检核后文档的批量下载
    - _需求: 14.批量文档操作_

  - [ ] 11.2 实现批量操作API
    - 在DocumentController中添加POST /api/v1/documents/batch-download接口
    - 支持文档ID列表和下载类型参数
    - 返回ZIP压缩文件流
    - _需求: 14.批量文档操作_

  - [ ] 11.3 创建批量操作前端组件
    - 实现附件列表的多选功能，包含复选框
    - 添加批量操作按钮区域
    - 实现操作进度显示和结果反馈
    - _需求: 14.批量文档操作_

- [ ] 12. 实现页面导航和路由
  - [ ] 12.1 配置前端路由
    - 设置产品管理主界面路由
    - 配置新增产品页面路由
    - 设置要件详情页面路由和参数传递
    - _需求: 1.页面导航功能_

  - [ ] 12.2 实现导航组件
    - 创建导航菜单组件，支持工作台跳转
    - 实现返回按钮功能
    - 添加面包屑导航显示
    - _需求: 1.页面导航功能_

- [ ] 13. 实现产品操作功能（MVP阶段）
  - [ ] 13.1 实现导入产品功能
    - 完善导入产品的完整业务逻辑
    - 集成所有上传、解析、校验功能
    - 实现端到端的产品导入流程
    - _需求: 3.产品操作功能_

  - [ ] 13.2 实现Mock操作功能
    - 为查看检核报告、智能检核、关注、删除等功能创建前端Mock
    - 实现操作按钮和Mock数据展示
    - 添加操作反馈提示但不执行实际业务逻辑
    - _需求: 3.产品操作功能_

- [ ] 14. 集成测试和优化
  - [ ] 14.1 编写端到端测试
    - 创建完整的产品创建流程测试
    - 测试文档上传和校验流程
    - 验证批量操作功能
    - _需求: 所有功能需求_

  - [ ] 14.2 性能优化和错误处理
    - 优化大文件上传性能
    - 完善错误处理和用户提示
    - 添加操作日志和监控
    - _需求: 所有功能需求_

  - [ ] 14.3 用户界面优化
    - 根据UI设计规范优化页面样式
    - 实现响应式布局适配
    - 添加加载状态和交互反馈
    - _需求: 所有功能需求_