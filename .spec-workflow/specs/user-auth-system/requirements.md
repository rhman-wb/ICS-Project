# 用户认证与权限管理系统需求文档

## 概述

本模块负责保险产品智能检核系统的用户认证、权限控制和基础用户管理功能，为整个系统提供安全的访问控制基础。

## 用户故事

### 1. 登录界面展示

**用户故事**: 作为系统用户，我希望看到专业友好的登录界面，能够清晰地识别系统身份和功能。

#### 验收标准
1. 当用户访问登录页面时，系统应显示居中的登录面板
2. 当展示系统标识时，应显示"保险产品智能检核系统"标题和公司Logo
3. 当页面加载时，应显示专业的背景设计和底部版权信息
4. 当在不同设备访问时，登录界面应保持响应式布局
5. 当页面元素加载时，应确保所有UI组件正确显示和对齐

### 2. 用户登录认证

**用户故事**: 作为系统用户，我希望能够通过用户名和密码安全登录系统，以便访问相应的功能模块。

#### 验收标准
1. 当用户输入正确的用户名和密码时，系统应允许用户成功登录
2. 当用户输入错误的凭据时，系统应显示"用户名或密码不正确"的错误提示
3. 当用户未填写用户名时，系统应显示"请填写用户账号"的提示
4. 当用户未填写密码时，系统应显示"请填写登录密码"的提示
5. 当用户连续登录失败超过5次时，系统应锁定账户30分钟
6. 当用户成功登录后，系统应记录登录时间和IP地址
7. 当用户会话超时时，系统应自动退出并要求重新登录

### 3. 输入框交互体验

**用户故事**: 作为系统用户，我希望输入框提供良好的交互体验，包括输入提示、清除功能和视觉反馈。

#### 验收标准
1. 当用户点击用户名输入框时，应显示输入焦点和相应的用户图标
2. 当用户点击密码输入框时，应显示输入焦点和锁定图标，密码应以掩码形式显示
3. 当用户在输入框中输入内容时，应显示清除按钮供用户快速清空内容
4. 当输入框为空时，清除按钮应隐藏
5. 当输入框获得焦点时，边框应有视觉高亮效果
6. 当输入内容超过最大长度限制时，应阻止继续输入

### 4. 登录按钮交互

**用户故事**: 作为系统用户，我希望登录按钮提供清晰的交互反馈，确保登录操作的可用性和状态提示。

#### 验收标准
1. 当用户填写完用户名和密码后，登录按钮应处于可点击状态
2. 当用户名或密码为空时，登录按钮应处于禁用状态
3. 当用户点击登录按钮时，按钮应显示加载状态并禁用重复点击
4. 当登录验证过程中，按钮文字应变为"登录中..."并显示加载动画
5. 当登录成功时，应跳转到系统主页面
6. 当登录失败时，按钮应恢复正常状态供用户重新尝试

### 5. 错误提示系统

**用户故事**: 作为系统用户，我希望系统能够提供清晰的错误提示信息，帮助我快速识别和解决登录问题。

#### 验收标准
1. 当出现错误时，系统应在登录面板上方显示错误提示区域
2. 当用户名或密码错误时，应显示红色警告图标和"用户名或密码不正确"文字
3. 当用户名为空时，应显示"请填写用户账号"的提示信息
4. 当密码为空时，应显示"请填写登录密码"的提示信息
5. 当错误提示显示后，用户修正输入时错误提示应自动消失
6. 当网络异常时，应显示"网络连接异常，请检查网络后重试"

### 6. 权限控制管理

**用户故事**: 作为系统管理员，我希望能够为不同用户分配不同的角色权限，以便控制用户对系统功能的访问范围。

#### 验收标准
1. 当管理员创建用户时，系统应支持分配以下角色：管理员、业务用户、审核用户
2. 当业务用户登录时，系统应只显示产品上传、检核执行、结果查看等功能
3. 当审核用户登录时，系统应只显示规则审核、检核结果审核等功能
4. 当管理员登录时，系统应显示所有功能模块
5. 当用户尝试访问无权限的功能时，系统应显示权限不足的提示

### 7. 用户会话管理

**用户故事**: 作为系统用户，我希望系统能够安全地管理我的登录会话，确保在适当的时候自动退出以保护账户安全。

#### 验收标准
1. 当用户登录成功后，系统应创建安全的会话令牌
2. 当用户在30分钟内无操作时，系统应自动退出登录
3. 当用户主动点击退出时，系统应立即清除会话信息
4. 当用户在其他设备登录时，系统应支持单点登录（可选择踢出其他会话）
5. 当会话过期时，系统应提示用户重新登录

### 8. 系统主页面导航

**用户故事**: 作为系统用户，我希望登录成功后能够看到清晰的系统导航和工作台界面，方便访问各个功能模块。

#### 验收标准
1. 当用户登录成功后，系统应跳转到主页面工作台
2. 当显示顶部导航栏时，系统应包含深蓝色背景的导航条
3. 当显示系统品牌时，系统应在左侧显示"产品检核系统"标识
4. 当显示主导航菜单时，系统应包含"主页"、"产品管理"、"规则管理"、"设置"四个主要菜单项
5. 当用户在主页时，系统应高亮显示"主页"菜单项
6. 当显示用户信息时，系统应在右上角显示当前登录用户名（如"Jay.Liu"）
7. 当用户点击不同菜单项时，系统应切换到对应的功能模块

### 9. 工作台数据汇总展示

**用户故事**: 作为系统用户，我希望在主页面能够看到系统的关键数据汇总，了解整体使用情况。

#### 验收标准
1. 当用户进入主页面时，系统应显示"汇总数据"区域
2. 当显示数据统计时，系统应包含四个主要指标：产品数量、要件数量、规则数量、已检核错误数量
3. 当显示数据数值时，系统应使用大号字体（28px）显示具体数字
4. 当显示数据标签时，系统应使用小号字体（14px）显示指标名称
5. 当显示时间筛选时，系统应提供"总计"、"本日"、"本周"、"本月"四个时间维度选项
6. 当用户选择不同时间维度时，系统应更新对应时间段的统计数据
7. 当默认进入页面时，系统应选中"总计"选项并高亮显示

### 10. 我的关注任务列表

**用户故事**: 作为系统用户，我希望在主页面能够查看我关注的产品任务，方便快速访问重要项目。

#### 验收标准
1. 当用户进入主页面时，系统应显示"我的关注"区域
2. 当显示任务列表时，系统应包含任务名称列，显示完整的产品名称
3. 当显示提交人信息时，系统应显示任务的提交人姓名（如"胡潇禹"）
4. 当显示提交时间时，系统应以"YYYY/MM/DD"格式显示日期（如"2022/10/31"）
5. 当用户点击产品名称时，系统应跳转到对应的产品详情页面
6. 当显示任务图标时，系统应在任务名称前显示相应的图标标识
7. 当任务列表较长时，系统应支持滚动查看更多任务

### 11. 任务搜索与筛选

**用户故事**: 作为系统用户，我希望能够搜索和筛选关注的任务，快速找到特定的产品项目。

#### 验收标准
1. 当用户需要搜索任务时，系统应在关注列表上方提供搜索输入框
2. 当显示搜索提示时，系统应显示"请输入任务名称"占位符文字
3. 当用户输入搜索关键词时，系统应实时过滤显示匹配的任务
4. 当用户需要按时间筛选时，系统应提供"按时间"下拉选择器
5. 当用户需要按任务类型筛选时，系统应提供"全部任务"下拉选择器
6. 当用户清空搜索条件时，系统应恢复显示所有关注的任务
7. 当搜索无结果时，系统应显示友好的空状态提示

### 12. 快速开始/便捷导航

**用户故事**: 作为系统用户，我希望在主页面能够快速访问常用功能，提高工作效率。

#### 验收标准
1. 当用户进入主页面时，系统应在右侧显示"快速开始 / 便捷导航"区域
2. 当显示快捷操作时，系统应提供以下功能按钮：导入产品、创建规则、批量导入、下载模板
3. 当用户点击"导入产品"时，系统应跳转到产品导入页面
4. 当用户点击"创建规则"时，系统应跳转到规则创建页面
5. 当用户点击"批量导入"时，系统应跳转到批量导入功能页面
6. 当用户点击"下载模板"时，系统应提供模板文件下载功能
7. 当显示其他操作时，系统应预留"操作四"、"操作五"等扩展按钮位置
8. 当某些功能有待处理数量时，系统应在按钮右上角显示数字徽章（如"24"）

### 13. 近期动态展示

**用户故事**: 作为系统用户，我希望能够查看系统的近期动态，了解团队成员的最新操作和系统活动。

#### 验收标准
1. 当用户进入主页面时，系统应在右下方显示"近期动态"区域
2. 当显示动态列表时，系统应按时间倒序显示最新的系统活动
3. 当显示上传动态时，系统应显示格式："[用户名]上传了 [产品名称]"，产品名称应为蓝色链接
4. 当显示规则操作动态时，系统应显示格式："[用户名] 更新了[数量]条规则"、"[用户名] 审核通过了[数量]条规则"、"[用户名] 配置了[数量]条规则"
5. 当显示时间信息时，系统应显示相对时间，如"几秒前"、"14分钟前"、"20分钟前"、"40分钟前"、"68分钟前"、"3小时前"
6. 当用户点击产品名称链接时，系统应跳转到对应的产品详情页面
7. 当动态列表较长时，系统应提供"查看更多"链接展开更多历史动态
8. 当显示动态项时，每个动态应有清晰的分隔线和适当的间距

### 14. 应用概要统计

**用户故事**: 作为系统用户，我希望能够查看详细的应用使用统计信息，了解系统的整体运行状况。

#### 验收标准
1. 当用户进入主页面时，系统应在左上方显示"应用概要"区域
2. 当显示累计统计时，系统应包含：累计上传产品数量、累计导入规则数量、错误检出率、平均检核时间
3. 当显示近期统计时，系统应包含：近7日上传产品数量、近30日上传产品数量、近7日导入规则数量、近30日导入规则数量
4. 当显示数据数值时，系统应使用大号字体（20px）突出显示关键数字
5. 当显示同比数据时，系统应显示百分比变化和对应的上升/下降箭头图标
6. 当同比数据上升时，系统应显示红色上升箭头图标
7. 当同比数据下降时，系统应显示绿色下降箭头图标
8. 当显示时间格式时，平均检核时间应以"HH:MM:SS"格式显示（如"00:02:27"）

### 15. 数量统计占比图表

**用户故事**: 作为系统用户，我希望能够通过图表直观地查看产品类型的分布情况和占比统计。

#### 验收标准
1. 当用户进入主页面时，系统应在右上方显示"数量统计占比"图表区域
2. 当显示图表切换时，系统应提供三个选项卡：产品管理部门、产品类型、规则类型
3. 当选择"产品类型"时，系统应显示饼图和对应的产品类型列表
4. 当显示产品类型列表时，系统应包含：种植险、意健险、车险、家财险、养殖险、其他等类型
5. 当显示每个类型时，系统应包含：彩色圆点标识、类型名称、占比百分比、具体数量
6. 当显示占比信息时，系统应确保所有百分比总和为100%
7. 当用户切换不同选项卡时，系统应更新图表和列表数据
8. 当显示图表时，系统应使用不同颜色区分各个类型，保持视觉清晰度

### 16. 操作日志记录

**用户故事**: 作为系统管理员，我希望系统能够记录用户的关键操作，以便进行安全审计和问题排查。

#### 验收标准
1. 当用户登录/退出时，系统应记录时间、IP地址、用户代理信息
2. 当用户执行关键操作时，系统应记录操作类型、操作对象、操作结果
3. 当系统发生安全事件时，系统应记录详细的事件信息
4. 当管理员查询日志时，系统应支持按时间、用户、操作类型等条件筛选
5. 当日志达到一定数量时，系统应自动归档历史日志

## 非功能需求

### UI/UX设计要求
- 登录界面应采用居中布局，适配不同屏幕尺寸
- 系统标识应清晰显示"保险产品智能检核系统"品牌信息
- 输入框应提供图标提示（用户图标、锁定图标）和交互反馈
- 错误提示应使用红色警告图标和清晰的文字说明
- 登录按钮应有明确的状态变化（正常、禁用、加载中）
- 整体色彩应体现保险行业的专业性和可信度

### 主页面设计要求
- 顶部导航栏应使用深蓝色背景（#001529），固定在页面顶部
- 系统品牌标识应显示在导航栏左侧，使用白色文字
- 主导航菜单应水平排列，包含"主页"、"产品管理"、"规则管理"、"设置"
- 当前页面对应的菜单项应有高亮状态显示
- 用户信息应显示在导航栏右侧，包含用户名和可能的头像
- 页面内容区域应有适当的内边距和布局间距

### 数据展示设计要求
- 汇总数据区域应使用卡片式布局，四个指标并排显示
- 数据数值应使用大号粗体字体（28px），突出显示关键信息
- 数据标签应使用小号字体（14px），颜色稍浅以形成层次
- 时间筛选选项应使用标签页形式，选中状态有明显视觉区分
- 数据卡片应有适当的阴影和圆角，提升视觉层次感

### 任务列表设计要求
- 我的关注区域应使用独立的容器布局
- 任务列表应支持垂直滚动，每个任务项有清晰的分隔
- 任务名称应支持点击跳转，使用链接样式显示
- 搜索框应有清晰的占位符提示和搜索图标
- 筛选下拉框应有下拉箭头图标和合适的宽度
- 列表项应有悬停效果，提升交互体验

### 交互体验要求
- 输入框应支持Tab键切换焦点
- 密码输入框应支持Enter键提交登录
- 输入内容时应提供实时的清除功能
- 错误提示应在用户修正输入时自动消失
- 登录过程应提供明确的加载状态反馈
- 主页面导航应支持键盘导航和快捷键
- 数据刷新应有loading状态指示
- 任务列表应支持键盘上下键选择

### 响应式设计要求
- 主页面应适配不同屏幕尺寸（1200px以上为主要目标）
- 导航栏在小屏幕下应保持功能完整性
- 数据汇总区域在中等屏幕下应支持换行显示
- 任务列表应在不同屏幕下保持良好的可读性
- 搜索和筛选功能应在移动端保持可用性

### 安全性要求
- 密码必须进行加密存储（BCrypt算法）
- 会话令牌必须使用JWT并设置合理的过期时间
- 所有敏感操作必须记录审计日志
- 支持防暴力破解机制
- 用户名和密码输入长度限制为20个字符
- 主页面数据应根据用户权限进行过滤显示

### 性能要求
- 用户登录响应时间不超过2秒
- 主页面加载时间不超过3秒
- 数据汇总统计查询响应时间不超过1秒
- 任务列表加载响应时间不超过2秒
- 搜索筛选响应时间不超过500毫秒
- 权限验证响应时间不超过100毫秒
- 支持并发用户数不少于100个

### 快速导航设计要求
- 快速开始区域应使用卡片式布局，按钮排列整齐
- 功能按钮应有清晰的文字标识和合适的间距
- 数字徽章应使用小圆形背景，颜色醒目但不突兀
- 按钮应有悬停效果和点击反馈
- 扩展按钮位置应预留合理空间，保持布局平衡

### 近期动态设计要求
- 动态列表应使用时间线式布局，每项动态有清晰分隔
- 用户名应使用常规字体，产品名称链接使用蓝色高亮
- 时间信息应使用较小字体和灰色文字
- 动态项应有适当的行高和内边距，保持良好可读性
- "查看更多"链接应居中显示，有明显的点击区域

### 图表展示设计要求
- 饼图应使用清晰的颜色区分，避免相近色彩
- 图例列表应与饼图颜色一一对应
- 数据标签应清晰易读，包含百分比和具体数值
- 选项卡切换应有明显的选中状态标识
- 图表区域应有适当的内边距和背景色

### 数据刷新要求
- 汇总数据应支持自动刷新（可配置间隔时间）
- 任务列表应支持手动刷新功能
- 近期动态应支持实时更新或定时刷新
- 数据更新时应有适当的loading状态提示
- 长时间无操作时应提示数据可能已过期
- 网络异常时应有友好的错误提示和重试机制

### 可用性要求
- 系统可用性不低于99.5%
- 界面应简洁友好，符合现代Web应用标准
- 错误提示应清晰明确，帮助用户快速定位问题
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 提供无障碍访问支持（屏幕阅读器、键盘导航）
- 主页面应提供快速访问常用功能的入口

### 兼容性要求
- 支持桌面端和移动端设备访问
- 兼容不同分辨率的显示设备
- 支持现代浏览器的最新版本
- 确保在不同操作系统下的一致性体验
- 字体应使用系统默认字体栈，确保跨平台显示一致


## 设计开发说明
- 目前是mvp阶段，登录成功后工作台页面目前只考虑前端页面展示，先不考虑后端业务实现，数据使用mock数据即可。