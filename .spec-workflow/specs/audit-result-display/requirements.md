# 产品检核结果展示模块需求文档

## 概述

本模块实现完整的产品智能检核流程前端展示功能，从产品管理页面的检核入口开始，包括检核规则选择、检核过程监控、检核结果展示和结果导出等核心界面功能。模块与product-document-management、user-auth-system、dashboard-home等模块集成，为用户提供一站式的产品检核服务界面。

**重要说明**：
- 检核处理的后台业务逻辑在其他模块实现，本模块暂时预留API接口，待后续服务提供后再进行对接完善
- 现阶段各页面使用Mock数据进行展示，确保与原型页面保持一致的用户体验

## 业务流程

### 检核流程概述（前端展示流程）
1. **检核入口**：从产品管理页面发起检核（单产品或批量产品）- 界面交互
2. **规则选择**：通过多维度筛选选择适用的检核规则 - 界面展示和交互
3. **检核执行**：启动检核任务并实时监控进度 - 前端状态展示
4. **结果展示**：按要件类型分类展示检核结果 - 数据展示和交互
5. **结果处理**：导出检核报告或进行结果确认操作 - 前端功能实现

### 模块集成关系
- **product-document-management**：提供产品列表和检核入口
- **user-auth-system**：提供用户身份验证和权限控制
- **dashboard-home**：提供主页导航和工作台功能
- **后台检核服务**：提供检核业务逻辑API（待对接）

### Mock数据要求
为确保开发阶段的功能展示，各页面需要使用Mock数据：
- **规则选择页面**：模拟检核规则列表数据，包含筛选条件和规则详情
- **检核过程页面**：模拟检核进度数据，包含产品数量和错误统计
- **检核结果页面**：模拟详细的检核结果数据，按要件类型分类展示
- **历史记录页面**：模拟历史检核记录数据

## 用户故事

### 1. 检核流程启动

**用户故事**: 作为业务用户，我希望能够从产品管理页面便捷地启动产品检核流程，支持单产品和批量产品检核。

#### 验收标准
1. 当在产品列表中，系统应在操作列提供【智能检核】按钮，支持单产品检核
2. 当需要批量检核时，系统应支持通过复选框选择多个产品
3. 当选择多个产品后，系统应在列表上方显示【智能检核】按钮
4. 当点击检核按钮时，系统应跳转到检核规则选择页面
5. 当检核启动时，系统应记录检核任务信息（使用Mock数据模拟）

#### Mock数据要求
- 模拟产品选择状态和检核任务创建过程
- 提供测试用的产品ID和任务ID数据

### 2. 检核规则选择与配置

**用户故事**: 作为业务用户，我希望能够根据产品特点和检核需求，灵活选择和配置检核规则。

#### 验收标准
1. 当进入规则选择页面时，系统应显示三步骤流程指示器（规则选取→产品检核→检核完成）
2. 当筛选规则时，系统应提供多维度筛选条件：
   - 规则来源下拉选择
   - 适用险种多选筛选
   - 规则管理部门选择
   - 适用要件类型筛选
   - 适用章节筛选
   - 有效状态筛选
   - 审核状态筛选
   - 起始时间和终止时间范围
3. 当查询规则时，系统应支持关键词搜索功能
4. 当选择规则时，系统应以列表形式展示规则详情，包括规则编号、描述、类型等
5. 当确认规则后，系统应提供【下一步】和【取消】操作

#### Mock数据要求
- 提供符合原型页面的检核规则Mock数据，包含：
  - 农业险、通过审核、产品创新部等筛选选项数据
  - 规则列表数据（规则编号CC001-CC017等）
  - 规则详情信息（规则描述、来源、类型等）
- 模拟筛选和搜索的交互效果

### 3. 检核过程监控

**用户故事**: 作为业务用户，我希望能够实时了解检核进度，并在需要时调整检核策略。

#### 验收标准
1. 当检核执行时，系统应显示实时进度信息：
   - 已检核产品数量
   - 已检出错误数量
   - 当前检核状态
2. 当检核进行中时，系统应提供【重新选取规则】选项，允许中断当前检核
3. 当检核任务较长时，系统应提供【后台进行】选项，允许用户关闭页面
4. 当检核完成时，系统应自动跳转到检核结果页面
5. 当检核异常时，系统应显示错误信息并提供重试选项

#### Mock数据要求
- 模拟检核进度数据：已检核产品数量（如10个）、已检出错误数量（如35个）
- 模拟检核状态变化：进行中、已完成、异常等状态
- 提供进度条和统计数字的动态更新效果

### 4. 检核结果分类展示

**用户故事**: 作为业务用户，我希望能够按要件类型查看详细的检核结果，快速定位和分析问题。

#### 验收标准
1. 当显示检核结果时，系统应按要件类型分类展示：
   - 条款检核结果
   - 可行性报告检核结果
   - 前后修改对比表检核结果
2. 当展示统计信息时，系统应提供规则类型统计表：
   - 单句规则、双句规则、格式规则、高级规则的命中数量
   - 按要件类型的问题分布统计
3. 当显示问题详情时，系统应提供完整的问题信息表格：
   - 规则编号
   - 修改建议
   - 适用章节
   - 规则来源
   - 规则管理部门
   - 规则类型
   - 原文内容（支持高亮显示）
   - 页码定位
4. 当查看原文内容时，系统应高亮显示问题位置
5. 当结果较多时，系统应支持分页显示和快速导航

#### Mock数据要求
- 提供符合原型页面的检核结果Mock数据，包含：
  - 统计表数据：各规则类型在不同要件中的数量分布
  - 详细结果表格数据：包含CC001-CC017规则编号的完整问题信息
  - 原文内容高亮显示的模拟数据
  - 页码信息和章节信息
- 确保与原型页面的数据展示格式完全一致

### 5. 检核结果导出与操作

**用户故事**: 作为业务用户，我希望能够导出检核结果清单，便于离线分析和问题处理。

#### 验收标准
1. 当需要导出时，系统应提供【导出检核结果清单】功能
2. 当导出检核报告时，系统应支持Excel格式，包含：
   - 问题汇总统计表
   - 按要件类型分类的详细问题清单
   - 规则信息和修改建议
3. 当导出完成时，系统应提供文件下载链接
4. 当查看结果时，系统应提供【返回】功能，回到产品管理页面
5. 当需要重新检核时，系统应支持基于当前配置重新执行检核

#### Mock数据要求
- 模拟文件导出过程和下载链接生成
- 提供Excel格式的模拟导出文件结构
- 模拟返回产品管理页面的导航功能

### 6. 检核历史记录管理

**用户故事**: 作为业务用户，我希望能够查看和管理历史检核记录，追踪产品质量改进情况。

#### 验收标准
1. 当产品有历史检核记录时，系统应在产品列表显示【查看检核报告】链接
2. 当查看历史记录时，系统应按时间倒序展示检核记录
3. 当对比检核结果时，系统应支持不同时间点的结果对比
4. 当查看检核详情时，系统应保留完整的检核配置和结果信息
5. 当管理检核记录时，系统应支持检核记录的归档和删除操作

#### Mock数据要求
- 提供模拟的历史检核记录数据
- 包含不同时间点的检核结果对比数据
- 模拟检核记录的管理操作

## 非功能需求

### 性能要求
- 页面加载时间不超过3秒
- Mock数据渲染响应时间不超过1秒
- 检核结果页面数据展示时间不超过2秒
- 支持同时访问的用户数不少于50个
- 文件导出模拟响应时间不超过5秒
- 页面切换和导航响应时间不超过1秒

### 用户体验要求
- 界面应简洁直观，检核流程清晰易懂
- 支持检核过程中的键盘快捷键操作
- 提供完整的操作指导和帮助文档
- 支持移动端适配和响应式设计
- 提供明确的流程指示和进度反馈
- 异常情况应有友好的错误提示和处理建议
- Mock数据应提供真实的用户体验

### 兼容性要求
- 支持主流浏览器的页面显示和交互
- Mock导出文件应与Office软件兼容
- 支持不同分辨率的显示设备
- 支持与现有产品管理系统的前端集成

### 开发阶段要求
- 所有页面功能使用Mock数据实现
- Mock数据应与原型页面保持高度一致
- 预留后台API接口，便于后续真实服务对接
- 提供完整的前端交互和状态管理

## 数据结构定义（Mock数据规范）

### 检核任务实体（Mock）
```json
{
  "auditTaskId": "string",
  "productIds": ["string"],
  "ruleIds": ["string"],
  "taskStatus": "pending|running|completed|failed",
  "createdBy": "string",
  "createdTime": "datetime",
  "completedTime": "datetime",
  "totalProducts": "number",
  "completedProducts": "number",
  "totalErrors": "number"
}
```

### 检核规则实体（Mock）
```json
{
  "ruleId": "string",
  "ruleCode": "string", // 如CC001-CC017
  "ruleName": "string",
  "ruleSource": "string", // 如"行政监管措施决定书（京银保监发〔2022〕36号）"
  "applicableInsuranceType": ["string"], // 如"农业险"
  "applicableChapter": "string", // 如"总则"、"保险责任"
  "managementDepartment": "string", // 如"产品创新部"
  "ruleType": "single|double|format|advanced", // 单句规则、双句规则、格式规则、高级规则
  "effectiveStatus": "active|inactive",
  "auditStatus": "approved|pending|rejected", // 如"通过审核"
  "effectiveStartTime": "datetime",
  "effectiveEndTime": "datetime"
}
```

### 检核结果实体（Mock）
```json
{
  "resultId": "string",
  "auditTaskId": "string",
  "productId": "string",
  "documentType": "terms|feasibility|comparison", // 条款、可行性报告、前后修改对比表
  "ruleId": "string",
  "ruleCode": "string", // CC001-CC017
  "suggestion": "string", // 修改建议
  "applicableChapter": "string", // 适用章节
  "ruleSource": "string", // 规则来源
  "managementDepartment": "string", // 规则管理部门
  "ruleType": "string", // 规则类型
  "originalContent": "string", // 原文内容（支持HTML高亮标记）
  "pageNumber": "string", // 页码，如"第1页"
  "highlightPosition": "object", // 高亮位置信息
  "severity": "high|medium|low",
  "createdTime": "datetime"
}
```

### 统计数据实体（Mock）
```json
{
  "statisticsId": "string",
  "auditTaskId": "string",
  "documentType": "terms|feasibility|comparison",
  "ruleTypeStats": {
    "single": "number", // 单句规则数量
    "double": "number", // 双句规则数量
    "format": "number", // 格式规则数量
    "advanced": "number" // 高级规则数量
  },
  "totalCount": "number"
}
```

## 技术实现要求

### 前端技术栈
- Vue 3 + TypeScript + Composition API
- Ant Design Vue 4.x UI组件库
- Pinia状态管理
- Vue Router路由管理
- Axios HTTP客户端
- Mock.js用于模拟数据生成

### Mock数据实现要求
- 使用Mock.js生成符合原型页面的模拟数据
- 提供数据持久化的本地存储方案
- 实现前端状态管理和数据缓存
- 支持模拟异步操作和加载状态

### 后端接口预留（暂不实现）
- RESTful API设计风格
- 支持分页查询和条件筛选
- 提供WebSocket实时通信（检核进度推送）
- 支持文件上传下载功能
- 完整的错误处理和异常响应

### 关键页面路由
- `/audit/rule-selection` - 检核规则选择页面
- `/audit/process-monitor` - 检核过程监控页面
- `/audit/result-display` - 检核结果展示页面
- `/audit/history` - 检核历史记录页面

### 预留API接口规范
**注意：以下接口仅为预留规范，现阶段使用Mock数据实现**

- `GET /api/audit/rules` - 查询检核规则（Mock实现）
- `POST /api/audit/tasks` - 创建检核任务（Mock实现）
- `GET /api/audit/tasks/{id}/progress` - 获取检核进度（Mock实现）
- `GET /api/audit/results/{taskId}` - 获取检核结果（Mock实现）
- `POST /api/audit/results/export` - 导出检核结果（Mock实现）
- `GET /api/audit/history` - 获取检核历史记录（Mock实现）

### Mock数据文件组织
```
src/mock/
├── audit-rules.js        # 检核规则Mock数据
├── audit-tasks.js        # 检核任务Mock数据
├── audit-results.js      # 检核结果Mock数据
├── audit-statistics.js   # 统计数据Mock数据
└── index.js              # Mock数据统一导出
```

### 开发阶段实现策略
1. **第一阶段**：使用Mock数据完成所有页面功能
2. **第二阶段**：预留API接口，便于后续对接
3. **第三阶段**：待后台服务完成后，替换Mock数据为真实API调用